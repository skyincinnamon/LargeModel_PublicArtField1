2025-06-28 18:27:07,661 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 18:27:07,661 - Startup - INFO - 所有依赖检查通过
2025-06-28 18:27:25,216 - Startup - ERROR - 启动服务时出错: 'Flask' object has no attribute 'before_first_request'
2025-06-28 18:27:25,218 - Startup - ERROR - Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\backend\start_server.py", line 64, in main
    from app import app
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\backend\app.py", line 29, in <module>
    @app.before_first_request
     ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Flask' object has no attribute 'before_first_request'. Did you mean: '_got_first_request'?

2025-06-28 18:31:26,123 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 18:31:26,124 - Startup - INFO - 所有依赖检查通过
2025-06-28 18:31:29,391 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 18:31:29,554 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 18:31:29,554 - RAG_Enhanced_Chat - ERROR - 向量数据库目录不存在或为空: chroma_db_deepseek_1.5b
2025-06-28 18:31:29,555 - RAG_Enhanced_Chat - ERROR - 请先创建向量数据库
2025-06-28 18:32:10,002 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 18:32:10,003 - Startup - INFO - 所有依赖检查通过
2025-06-28 18:32:13,140 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 18:32:13,218 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 18:32:13,219 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 18:32:13,788 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 18:32:14,147 - Backend_API - ERROR - 系统初始化失败: Error executing plan: Error sending backfill request to compactor: Error constructing hnsw segment reader: Error creating hnsw segment reader: Error loading hnsw index
2025-06-28 18:32:14,161 - Backend_API - ERROR - Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\backend\app.py", line 34, in initialize_backend
    system_components = initialize_system()
                        ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\组合5.py", line 110, in initialize_system
    logger.info(f"向量数据库加载成功，包含 {vector_store._collection.count()} 个文档")
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\chromadb\api\models\Collection.py", line 39, in count
    return self._client._count(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\chromadb\api\rust.py", line 327, in _count
    return self.bindings.count(str(collection_id), tenant, database)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.InternalError: Error executing plan: Error sending backfill request to compactor: Error constructing hnsw segment reader: Error creating hnsw segment reader: Error loading hnsw index

2025-06-28 18:32:14,162 - Startup - INFO - 后端服务启动成功
2025-06-28 18:32:14,162 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 18:32:14,162 - Startup - INFO - API文档:
2025-06-28 18:32:14,162 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 18:32:14,162 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 18:32:14,162 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 18:32:14,162 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 18:32:15,439 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 18:32:15,440 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 18:32:25,847 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:32:25] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 18:32:26,110 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:32:26] "[35m[1mPOST /api/chat HTTP/1.1[0m" 503 -
2025-06-28 18:40:07,644 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 18:40:07,644 - Startup - INFO - 所有依赖检查通过
2025-06-28 18:40:11,035 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 18:40:11,143 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 18:40:11,143 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 18:40:11,425 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 18:40:11,521 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 0 个文档
2025-06-28 18:40:11,521 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\models\Qwen3-8B-optimized
2025-06-28 18:40:11,662 - Backend_API - ERROR - 系统初始化失败: Can't load the configuration of 'models\Qwen3-8B'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'models\Qwen3-8B' is the correct path to a directory containing a config.json file
2025-06-28 18:40:11,696 - Backend_API - ERROR - Traceback (most recent call last):
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    hf_hub_download(
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'models\Qwen3-8B'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\configuration_utils.py", line 654, in _get_config_dict
    resolved_config_file = cached_file(
                           ^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 312, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 523, in cached_files
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 140, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'models\Qwen3-8B'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\backend\app.py", line 34, in initialize_backend
    system_components = initialize_system()
                        ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\组合5.py", line 123, in initialize_system
    model = AutoModelForCausalLM.from_pretrained(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\models\auto\auto_factory.py", line 531, in from_pretrained
    config, kwargs = AutoConfig.from_pretrained(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\models\auto\configuration_auto.py", line 1153, in from_pretrained
    config_dict, unused_kwargs = PretrainedConfig.get_config_dict(pretrained_model_name_or_path, **kwargs)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\configuration_utils.py", line 595, in get_config_dict
    config_dict, kwargs = cls._get_config_dict(pretrained_model_name_or_path, **kwargs)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\configuration_utils.py", line 677, in _get_config_dict
    raise OSError(
OSError: Can't load the configuration of 'models\Qwen3-8B'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'models\Qwen3-8B' is the correct path to a directory containing a config.json file

2025-06-28 18:40:11,706 - Startup - INFO - 后端服务启动成功
2025-06-28 18:40:11,706 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 18:40:11,706 - Startup - INFO - API文档:
2025-06-28 18:40:11,706 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 18:40:11,706 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 18:40:11,707 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 18:40:11,707 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 18:40:12,961 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 18:40:12,961 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 18:45:19,458 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 18:45:19,458 - Startup - INFO - 所有依赖检查通过
2025-06-28 18:45:22,657 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 18:45:22,742 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 18:45:22,742 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 18:45:23,012 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 18:45:23,095 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 0 个文档
2025-06-28 18:45:23,096 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\models\Qwen3-8B-optimized
2025-06-28 18:45:23,219 - Backend_API - ERROR - 系统初始化失败: Can't load the configuration of 'models\Qwen3-8B'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'models\Qwen3-8B' is the correct path to a directory containing a config.json file
2025-06-28 18:45:23,221 - Backend_API - ERROR - Traceback (most recent call last):
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 470, in cached_files
    hf_hub_download(
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'models\Qwen3-8B'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\configuration_utils.py", line 654, in _get_config_dict
    resolved_config_file = cached_file(
                           ^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 312, in cached_file
    file = cached_files(path_or_repo_id=path_or_repo_id, filenames=[filename], **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 523, in cached_files
    _get_cache_file_to_return(path_or_repo_id, filename, cache_dir, revision) for filename in full_filenames
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\utils\hub.py", line 140, in _get_cache_file_to_return
    resolved_file = try_to_load_from_cache(path_or_repo_id, full_filename, cache_dir=cache_dir, revision=revision)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 106, in _inner_fn
    validate_repo_id(arg_value)
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\huggingface_hub\utils\_validators.py", line 160, in validate_repo_id
    raise HFValidationError(
huggingface_hub.errors.HFValidationError: Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-' and '.' cannot start or end the name, max length is 96: 'models\Qwen3-8B'.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\backend\app.py", line 34, in initialize_backend
    system_components = initialize_system()
                        ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\组合5.py", line 123, in initialize_system
    model = AutoModelForCausalLM.from_pretrained(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\models\auto\auto_factory.py", line 531, in from_pretrained
    config, kwargs = AutoConfig.from_pretrained(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\models\auto\configuration_auto.py", line 1153, in from_pretrained
    config_dict, unused_kwargs = PretrainedConfig.get_config_dict(pretrained_model_name_or_path, **kwargs)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\configuration_utils.py", line 595, in get_config_dict
    config_dict, kwargs = cls._get_config_dict(pretrained_model_name_or_path, **kwargs)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\transformers\configuration_utils.py", line 677, in _get_config_dict
    raise OSError(
OSError: Can't load the configuration of 'models\Qwen3-8B'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'models\Qwen3-8B' is the correct path to a directory containing a config.json file

2025-06-28 18:45:23,230 - Startup - INFO - 后端服务启动成功
2025-06-28 18:45:23,230 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 18:45:23,230 - Startup - INFO - API文档:
2025-06-28 18:45:23,230 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 18:45:23,230 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 18:45:23,230 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 18:45:23,230 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 18:45:24,514 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 18:45:24,515 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 18:45:52,942 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:45:52] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 18:45:53,188 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:45:53] "[35m[1mPOST /api/chat HTTP/1.1[0m" 503 -
2025-06-28 18:46:58,816 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 18:46:58,816 - Startup - INFO - 所有依赖检查通过
2025-06-28 18:47:02,039 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 18:47:02,146 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 18:47:02,146 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 18:47:02,407 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 18:47:02,490 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 0 个文档
2025-06-28 18:47:02,490 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 18:47:02,612 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 18:47:04,808 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 18:47:17,824 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 18:47:18,612 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 18:47:18,616 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 18:47:18,616 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 18:47:18,616 - Startup - INFO - 后端服务启动成功
2025-06-28 18:47:18,616 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 18:47:18,616 - Startup - INFO - API文档:
2025-06-28 18:47:18,616 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 18:47:18,616 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 18:47:18,617 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 18:47:18,617 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 18:47:19,899 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 18:47:19,901 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 18:51:25,973 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 18:51:25,973 - Startup - INFO - 所有依赖检查通过
2025-06-28 18:51:29,267 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 18:51:29,352 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 18:51:29,352 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 18:51:29,616 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 18:51:29,707 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 0 个文档
2025-06-28 18:51:29,707 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 18:51:29,840 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 18:51:31,374 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 18:51:39,475 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 18:51:40,168 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 18:51:40,171 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 18:51:40,171 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 18:51:40,171 - Startup - INFO - 后端服务启动成功
2025-06-28 18:51:40,172 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 18:51:40,172 - Startup - INFO - API文档:
2025-06-28 18:51:40,172 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 18:51:40,172 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 18:51:40,172 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 18:51:40,172 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 18:51:41,425 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 18:51:41,426 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 18:51:58,867 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:51:58] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 18:51:59,126 - Backend_API - INFO - 收到用户消息: 城市雕塑的分类...
2025-06-28 18:52:10,643 - Backend_API - INFO - 生成响应完成，长度: 277
2025-06-28 18:52:10,644 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:52:10] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 18:52:42,279 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:52:42] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 18:52:42,596 - Backend_API - INFO - 收到用户消息: 社会艺术是什么...
2025-06-28 18:52:42,767 - Backend_API - INFO - 生成响应完成，长度: 0
2025-06-28 18:52:42,768 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:52:42] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 18:53:12,628 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:53:12] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 18:53:12,941 - Backend_API - INFO - 收到用户消息: 社会艺术是什么？...
2025-06-28 18:53:15,628 - Backend_API - INFO - 生成响应完成，长度: 5
2025-06-28 18:53:15,628 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:53:15] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 18:53:28,816 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:53:28] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 18:53:29,124 - Backend_API - INFO - 收到用户消息: 社会艺术是什么？...
2025-06-28 18:53:29,311 - Backend_API - INFO - 生成响应完成，长度: 0
2025-06-28 18:53:29,312 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:53:29] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 18:55:45,615 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:55:45] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 18:55:45,877 - Backend_API - INFO - 收到用户消息: 社会艺术是什么？...
2025-06-28 18:55:46,026 - Backend_API - ERROR - 处理聊天请求时出错: Error executing plan: Internal error: Error creating hnsw segment reader: Error loading hnsw index
2025-06-28 18:55:46,088 - Backend_API - ERROR - Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\backend\app.py", line 70, in chat
    response = generate_response(system_components, messages, user_message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\组合5.py", line 184, in generate_response
    retrieved_docs = components["retriever"].get_relevant_documents(question)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\schema\retriever.py", line 211, in get_relevant_documents
    raise e
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\schema\retriever.py", line 204, in get_relevant_documents
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\schema\vectorstore.py", line 657, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\vectorstores\chroma.py", line 348, in similarity_search
    docs_and_scores = self.similarity_search_with_score(query, k, filter=filter)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\vectorstores\chroma.py", line 433, in similarity_search_with_score
    results = self.__query_collection(
              ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\utils\utils.py", line 35, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\vectorstores\chroma.py", line 155, in __query_collection
    return self._collection.query(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\chromadb\api\models\Collection.py", line 221, in query
    query_results = self._client._query(
                    ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\chromadb\api\rust.py", line 512, in _query
    rust_response = self.bindings.query(
                    ^^^^^^^^^^^^^^^^^^^^
chromadb.errors.InternalError: Error executing plan: Internal error: Error creating hnsw segment reader: Error loading hnsw index

2025-06-28 18:55:46,088 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 18:55:46] "[35m[1mPOST /api/chat HTTP/1.1[0m" 500 -
2025-06-28 19:10:46,569 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:10:46,569 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:10:49,759 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:10:49,853 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:10:49,853 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:10:50,115 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:10:50,186 - RAG_Enhanced_Chat - WARNING - 向量数据库加载失败: Error executing plan: Error sending backfill request to compactor: Error constructing hnsw segment reader: Error creating hnsw segment reader: Error loading hnsw index
2025-06-28 19:10:50,186 - RAG_Enhanced_Chat - INFO - 尝试重新创建向量数据库...
2025-06-28 19:10:50,187 - Backend_API - ERROR - 系统初始化失败: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\Lenovo\\Desktop\\微调大模型\\qwen-rag-lora\\chroma_db_deepseek_1.5b\\chroma.sqlite3'
2025-06-28 19:10:50,188 - Backend_API - ERROR - Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\组合5.py", line 109, in initialize_system
    doc_count = vector_store._collection.count()
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\chromadb\api\models\Collection.py", line 39, in count
    return self._client._count(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\site-packages\chromadb\api\rust.py", line 327, in _count
    return self.bindings.count(str(collection_id), tenant, database)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.InternalError: Error executing plan: Error sending backfill request to compactor: Error constructing hnsw segment reader: Error creating hnsw segment reader: Error loading hnsw index

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\backend\app.py", line 34, in initialize_backend
    system_components = initialize_system()
                        ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\Desktop\微调大模型\qwen-rag-lora\组合5.py", line 117, in initialize_system
    shutil.rmtree(db_directory)
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\shutil.py", line 781, in rmtree
    return _rmtree_unsafe(path, onexc)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\shutil.py", line 635, in _rmtree_unsafe
    onexc(os.unlink, fullname, err)
  File "C:\Users\Lenovo\AppData\Local\Programs\Python\Python312\Lib\shutil.py", line 633, in _rmtree_unsafe
    os.unlink(fullname)
PermissionError: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\Lenovo\\Desktop\\微调大模型\\qwen-rag-lora\\chroma_db_deepseek_1.5b\\chroma.sqlite3'

2025-06-28 19:10:50,188 - Startup - INFO - 后端服务启动成功
2025-06-28 19:10:50,188 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:10:50,189 - Startup - INFO - API文档:
2025-06-28 19:10:50,189 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:10:50,189 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:10:50,189 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:10:50,189 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:10:51,465 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:10:51,465 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:11:29,733 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:11:29] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:15:49,166 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:15:49] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:20:14,671 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:20:14] "[35m[1mPOST /api/chat HTTP/1.1[0m" 503 -
2025-06-28 19:20:54,308 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:20:54,308 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:20:57,518 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:20:57,688 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:20:57,688 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:20:57,951 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:20:58,033 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:20:58,034 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:20:58,154 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:20:59,572 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:21:07,020 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:21:07,596 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:21:07,599 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:21:07,599 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:21:07,599 - Startup - INFO - 后端服务启动成功
2025-06-28 19:21:07,599 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:21:07,599 - Startup - INFO - API文档:
2025-06-28 19:21:07,599 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:21:07,599 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:21:07,599 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:21:07,599 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:21:08,882 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:21:08,882 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:21:16,342 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:21:16] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:21:16,588 - Backend_API - INFO - 收到用户消息: 社会艺术是什么...
2025-06-28 19:21:24,718 - Backend_API - INFO - 生成响应完成，长度: 5
2025-06-28 19:21:24,718 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:21:24] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:23:21,588 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:23:21,589 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:23:24,741 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:23:24,830 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:23:24,831 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:23:25,088 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:23:25,178 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:23:25,178 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:23:25,301 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:23:26,706 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:23:39,151 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:23:39,739 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:23:39,742 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:23:39,742 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:23:39,742 - Startup - INFO - 后端服务启动成功
2025-06-28 19:23:39,742 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:23:39,743 - Startup - INFO - API文档:
2025-06-28 19:23:39,743 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:23:39,743 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:23:39,743 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:23:39,743 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:23:41,016 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:23:41,017 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:23:49,105 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:23:49] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:23:49,376 - Backend_API - INFO - 收到用户消息: 社会艺术是什么...
2025-06-28 19:25:06,047 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:25:06] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:25:07,735 - Backend_API - INFO - 生成响应完成，长度: 0
2025-06-28 19:25:38,842 - Backend_API - INFO - 收到用户消息: 社会艺术是什么...
2025-06-28 19:25:38,843 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:25:38] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:25:48,057 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:25:48,057 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:25:51,268 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:25:51,388 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:25:51,388 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:25:51,653 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:25:51,737 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:25:51,737 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:25:51,858 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:25:53,267 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:26:00,416 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:26:01,012 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:26:01,015 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:26:01,016 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:26:01,016 - Startup - INFO - 后端服务启动成功
2025-06-28 19:26:01,016 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:26:01,016 - Startup - INFO - API文档:
2025-06-28 19:26:01,016 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:26:01,016 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:26:01,016 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:26:01,016 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:26:02,291 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:26:02,291 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:26:04,477 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:26:04] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:26:04,741 - Backend_API - INFO - 收到用户消息: 社会艺术是什么...
2025-06-28 19:27:25,826 - Backend_API - INFO - 生成响应完成，长度: 0
2025-06-28 19:27:25,827 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:27:25] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:31:53,063 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:31:53,063 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:31:56,451 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:31:56,577 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:31:56,577 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:31:56,840 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:31:56,917 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:31:56,917 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:31:57,040 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:31:58,446 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:32:05,712 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:32:06,294 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:32:06,297 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:32:06,297 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:32:06,297 - Startup - INFO - 后端服务启动成功
2025-06-28 19:32:06,297 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:32:06,297 - Startup - INFO - API文档:
2025-06-28 19:32:06,297 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:32:06,297 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:32:06,297 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:32:06,297 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:32:07,579 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:32:07,579 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:32:21,798 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:32:21] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:32:22,058 - Backend_API - INFO - 收到用户消息: 社会艺术是什么...
2025-06-28 19:32:51,075 - Backend_API - INFO - 生成响应完成，长度: 783
2025-06-28 19:32:51,076 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:32:51] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:36:19,728 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:36:19,729 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:36:22,945 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:36:23,015 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:36:23,015 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:36:23,281 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:36:23,373 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:36:23,373 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:36:23,496 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:36:24,906 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:36:32,507 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:36:33,088 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:36:33,096 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:36:33,097 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:36:33,097 - Startup - INFO - 后端服务启动成功
2025-06-28 19:36:33,097 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:36:33,097 - Startup - INFO - API文档:
2025-06-28 19:36:33,097 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:36:33,097 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:36:33,097 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:36:33,097 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:36:34,379 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:36:34,380 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:36:49,899 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:36:49] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:36:50,148 - Backend_API - INFO - 收到用户消息: 社会艺术是什么？...
2025-06-28 19:37:00,063 - Backend_API - INFO - 生成响应完成，长度: 153
2025-06-28 19:37:00,063 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:37:00] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:38:04,491 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:38:04] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:38:04,756 - Backend_API - INFO - 收到用户消息: 它有什么意义？...
2025-06-28 19:38:45,233 - Backend_API - INFO - 生成响应完成，长度: 0
2025-06-28 19:38:45,233 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:38:45] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:43:30,956 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:43:30,956 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:43:34,224 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:43:34,324 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:43:34,324 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:43:34,595 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:43:34,675 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:43:34,675 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:43:34,798 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:43:36,212 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:43:43,703 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:43:44,301 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:43:44,304 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:43:44,305 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:43:44,305 - Startup - INFO - 后端服务启动成功
2025-06-28 19:43:44,305 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:43:44,305 - Startup - INFO - API文档:
2025-06-28 19:43:44,305 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:43:44,305 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:43:44,305 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:43:44,305 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:43:45,553 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:43:45,553 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:43:54,366 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:43:54] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:43:54,616 - Backend_API - INFO - 收到用户消息: 社会艺术是什么？...
2025-06-28 19:43:54,619 - Backend_API - INFO - 当前对话历史包含 2 条消息
2025-06-28 19:43:56,332 - RAG_Enhanced_Chat - INFO - 对话历史长度: 13 字符
2025-06-28 19:44:06,002 - Backend_API - INFO - 生成响应完成，长度: 0
2025-06-28 19:44:06,003 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:44:06] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:44:34,324 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:44:34] "GET /api/health HTTP/1.1" 200 -
2025-06-28 19:44:45,849 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:44:45] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:44:46,166 - Backend_API - INFO - 收到用户消息: 社会艺术是什么？...
2025-06-28 19:44:46,166 - Backend_API - INFO - 当前对话历史包含 4 条消息
2025-06-28 19:44:46,303 - RAG_Enhanced_Chat - INFO - 对话历史长度: 31 字符
2025-06-28 19:45:04,289 - Backend_API - INFO - 生成响应完成，长度: 162
2025-06-28 19:45:04,290 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:45:04] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:45:48,352 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:45:48] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:45:48,618 - Backend_API - INFO - 收到用户消息: 它有什么意义？...
2025-06-28 19:45:48,618 - Backend_API - INFO - 当前对话历史包含 6 条消息
2025-06-28 19:45:48,733 - RAG_Enhanced_Chat - INFO - 对话历史长度: 210 字符
2025-06-28 19:46:00,328 - Backend_API - INFO - 生成响应完成，长度: 216
2025-06-28 19:46:00,328 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:46:00] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:46:17,161 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:46:17] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:46:17,468 - Backend_API - INFO - 收到用户消息: 有哪些相关的观点呢？...
2025-06-28 19:46:17,469 - Backend_API - INFO - 当前对话历史包含 8 条消息
2025-06-28 19:46:17,610 - RAG_Enhanced_Chat - INFO - 对话历史长度: 446 字符
2025-06-28 19:46:41,292 - Backend_API - INFO - 生成响应完成，长度: 248
2025-06-28 19:46:41,293 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:46:41] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:48:18,985 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:48:18] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:48:19,247 - Backend_API - INFO - 收到用户消息: 有哪些相关的文献观点呢？...
2025-06-28 19:48:19,249 - Backend_API - INFO - 当前对话历史包含 10 条消息
2025-06-28 19:48:19,360 - RAG_Enhanced_Chat - INFO - 对话历史长度: 716 字符
2025-06-28 19:48:43,212 - Backend_API - INFO - 生成响应完成，长度: 5
2025-06-28 19:48:43,213 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:48:43] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:48:57,212 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:48:57] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:48:57,532 - Backend_API - INFO - 收到用户消息: 有哪些相关的文献观点呢？...
2025-06-28 19:48:57,533 - Backend_API - INFO - 当前对话历史包含 12 条消息
2025-06-28 19:48:57,703 - RAG_Enhanced_Chat - INFO - 对话历史长度: 743 字符
2025-06-28 19:49:18,615 - Backend_API - INFO - 生成响应完成，长度: 5
2025-06-28 19:49:18,615 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:49:18] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:49:42,060 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:49:42,060 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:49:45,391 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:49:45,511 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:49:45,511 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:49:45,783 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:49:45,896 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:49:45,896 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:49:46,023 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:49:47,595 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:49:55,173 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:49:55,792 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:49:55,795 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:49:55,795 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:49:55,796 - Startup - INFO - 后端服务启动成功
2025-06-28 19:49:55,796 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:49:55,796 - Startup - INFO - API文档:
2025-06-28 19:49:55,796 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:49:55,796 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:49:55,796 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:49:55,796 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:49:57,061 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:49:57,061 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:51:23,627 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:51:23] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:51:23,872 - Backend_API - INFO - 收到用户消息: 公共艺术是什么？...
2025-06-28 19:51:23,872 - Backend_API - INFO - 当前对话历史包含 2 条消息
2025-06-28 19:51:23,873 - RAG_Enhanced_Chat - INFO - 对话历史长度: 13 字符
2025-06-28 19:51:23,874 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: 公共艺术是什么？  公共艺术是什么？
2025-06-28 19:51:24,161 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 19:51:42,826 - Backend_API - INFO - 生成响应完成，长度: 194
2025-06-28 19:51:42,826 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:51:42] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:51:59,367 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:51:59] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:51:59,685 - Backend_API - INFO - 收到用户消息: 它有什么意义呢？...
2025-06-28 19:51:59,686 - Backend_API - INFO - 当前对话历史包含 4 条消息
2025-06-28 19:51:59,687 - RAG_Enhanced_Chat - INFO - 对话历史长度: 225 字符
2025-06-28 19:51:59,687 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: 公共艺术是什么？ 公共艺术是一种以公众为服务对象的艺术形式。它不仅关注艺术作品本身，更注重其与社会、文化、环境的互动关系，旨在通过艺术手段提升公众审美意识、促进文化交流和社会和谐发展。在高校教育中，公共艺术课程作为新美育的重要组成部分，对于培养具有高尚道德情操和良好审美能力的大学生具有重要意义。例如，一些高校开设的公共艺术课程，就将梅洛-庞蒂的“身体”理论融入教学，强调通过身体体验来深化学生的审美感受。 它有什么意义呢？  它有什么意义呢？
2025-06-28 19:51:59,885 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 19:52:10,906 - Backend_API - INFO - 生成响应完成，长度: 194
2025-06-28 19:52:10,907 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:52:10] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:52:25,720 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:52:25] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:52:26,032 - Backend_API - INFO - 收到用户消息: 有没有其他相关的观点...
2025-06-28 19:52:26,034 - Backend_API - INFO - 当前对话历史包含 6 条消息
2025-06-28 19:52:26,038 - RAG_Enhanced_Chat - INFO - 对话历史长度: 439 字符
2025-06-28 19:52:26,188 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 19:52:31,015 - Backend_API - INFO - 生成响应完成，长度: 9
2025-06-28 19:52:31,016 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:52:31] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:52:42,585 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:52:42] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:52:42,906 - Backend_API - INFO - 收到用户消息: 有没有其他公共艺术相关的观点...
2025-06-28 19:52:42,907 - Backend_API - INFO - 当前对话历史包含 8 条消息
2025-06-28 19:52:42,909 - RAG_Enhanced_Chat - INFO - 对话历史长度: 472 字符
2025-06-28 19:52:43,035 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 19:53:05,129 - Backend_API - INFO - 生成响应完成，长度: 214
2025-06-28 19:53:05,131 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:53:05] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:53:20,921 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:53:20] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:53:21,233 - Backend_API - INFO - 收到用户消息: 公共艺术是什么？...
2025-06-28 19:53:21,234 - Backend_API - INFO - 当前对话历史包含 10 条消息
2025-06-28 19:53:21,235 - RAG_Enhanced_Chat - INFO - 对话历史长度: 704 字符
2025-06-28 19:53:21,235 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: [|im end| 有没有其他公共艺术相关的观点 除了前面提到的公共艺术的意义，还有观点指出公共艺术在高校教育中的重要性。它不仅是艺术教育的一部分，更是新美育的重要载体。通过公共艺术课程，学生能够接触到多元化的艺术形式，拓宽视野，提高审美能力。此外，公共艺术还能够促进校园文化建设，增强师生的文化认同感和归属感。例如，在一些高校，公共艺术课程被用来开展各种艺术实践活动，如音乐会、展览等，为学生提供了丰富的文化体验。这些活动不仅提升了学生的艺术素养，也促进了校园文化的繁荣发展。 公共艺术是什么？  公共艺术是什么？
2025-06-28 19:53:21,418 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 19:53:33,064 - Backend_API - INFO - 生成响应完成，长度: 183
2025-06-28 19:53:33,065 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:53:33] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 19:56:42,549 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 19:56:42,550 - Startup - INFO - 所有依赖检查通过
2025-06-28 19:56:45,864 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 19:56:46,012 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 19:56:46,013 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 19:56:46,286 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 19:56:46,361 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 19:56:46,361 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 19:56:46,484 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 19:56:47,957 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 19:56:55,095 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 19:56:55,675 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 19:56:55,679 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 19:56:55,679 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 19:56:55,679 - Startup - INFO - 后端服务启动成功
2025-06-28 19:56:55,679 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 19:56:55,679 - Startup - INFO - API文档:
2025-06-28 19:56:55,679 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 19:56:55,679 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 19:56:55,679 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 19:56:55,679 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 19:56:56,959 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 19:56:56,959 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 19:57:31,988 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:57:31] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 19:57:32,251 - Backend_API - INFO - 收到用户消息: 公共艺术是什么？...
2025-06-28 19:57:32,253 - Backend_API - INFO - 当前对话历史包含 2 条消息
2025-06-28 19:57:32,254 - RAG_Enhanced_Chat - INFO - 对话历史长度: 13 字符
2025-06-28 19:57:32,255 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: 公共艺术是什么？  公共艺术是什么？
2025-06-28 19:57:32,412 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 19:57:55,465 - Backend_API - INFO - 生成响应完成，长度: 286
2025-06-28 19:57:55,466 - Backend_API - INFO - 当前历史记录: 2 条消息
2025-06-28 19:57:55,466 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 19:57:55] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 20:00:30,828 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:00:30] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 20:00:31,086 - Backend_API - INFO - 收到用户消息: 它有什么意义呢？...
2025-06-28 20:00:31,086 - Backend_API - INFO - 当前对话历史包含 4 条消息
2025-06-28 20:00:31,089 - RAG_Enhanced_Chat - INFO - 对话历史长度: 317 字符
2025-06-28 20:00:31,090 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: 公共艺术是什么？ 公共艺术是一种以社会公众为主要服务对象的艺术形式，它通过各种媒介和手段在公共场所进行创作，旨在提升人们的生活品质和审美体验。它不仅关注艺术本身的美感，更注重与社会、文化、环境等方面的互动与融合。公共艺术作品通常具有较强的公共性和参与性，能够引发公众对社会问题的关注和思考，促进社会和谐与进步。在公共艺术的创作过程中，艺术家需要充分考虑作品所处的环境和社会背景，以实现艺术与社会的有机统一。此外，公共艺术还承担着文化传播和教育的功能，能够向公众传递有价值的文化信息和理念。例如，一些城市广场上的雕塑作品，既是美丽的艺术品，也是城市文化的象征，体现了公共艺术的社会价值和意义。 它有什么意义呢？  它有什么意义呢？
2025-06-28 20:00:31,217 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 20:00:49,496 - Backend_API - INFO - 生成响应完成，长度: 197
2025-06-28 20:00:49,497 - Backend_API - INFO - 当前历史记录: 4 条消息
2025-06-28 20:00:49,498 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:00:49] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 20:01:05,591 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:01:05] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 20:01:05,901 - Backend_API - INFO - 收到用户消息: 有没有相关的文献观点...
2025-06-28 20:01:05,902 - Backend_API - INFO - 当前对话历史包含 6 条消息
2025-06-28 20:01:05,903 - RAG_Enhanced_Chat - INFO - 对话历史长度: 534 字符
2025-06-28 20:01:06,007 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 20:01:23,073 - Backend_API - INFO - 生成响应完成，长度: 0
2025-06-28 20:01:23,074 - Backend_API - INFO - 当前历史记录: 6 条消息
2025-06-28 20:01:23,076 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:01:23] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 20:01:38,425 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:01:38] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 20:01:38,742 - Backend_API - INFO - 收到用户消息: 有没有公共艺术相关的文献观点...
2025-06-28 20:01:38,745 - Backend_API - INFO - 当前对话历史包含 8 条消息
2025-06-28 20:01:38,745 - RAG_Enhanced_Chat - INFO - 对话历史长度: 558 字符
2025-06-28 20:01:38,848 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 20:01:54,903 - Backend_API - INFO - 生成响应完成，长度: 197
2025-06-28 20:01:54,904 - Backend_API - INFO - 当前历史记录: 8 条消息
2025-06-28 20:01:54,904 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:01:54] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 20:07:14,256 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 20:07:14,257 - Startup - INFO - 所有依赖检查通过
2025-06-28 20:07:17,526 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 20:07:17,619 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 20:07:17,619 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 20:07:17,888 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 20:07:17,980 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 20:07:17,980 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 20:07:18,100 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 20:07:19,545 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 20:07:31,223 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 20:07:31,806 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 20:07:31,809 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 20:07:31,810 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 20:07:31,810 - Startup - INFO - 后端服务启动成功
2025-06-28 20:07:31,810 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 20:07:31,810 - Startup - INFO - API文档:
2025-06-28 20:07:31,810 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 20:07:31,810 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 20:07:31,810 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 20:07:31,810 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 20:07:33,078 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 20:07:33,078 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 20:07:51,015 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:07:51] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 20:07:51,261 - Backend_API - INFO - 收到用户消息: 公共艺术是什么？...
2025-06-28 20:07:51,261 - Backend_API - INFO - 当前对话历史包含 2 条消息
2025-06-28 20:07:51,262 - RAG_Enhanced_Chat - INFO - 对话历史长度: 13 字符
2025-06-28 20:07:51,263 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: 公共艺术是什么？  公共艺术是什么？
2025-06-28 20:07:52,695 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 20:08:05,222 - Backend_API - INFO - 生成响应完成，长度: 204
2025-06-28 20:08:05,223 - Backend_API - INFO - 当前历史记录: 2 条消息
2025-06-28 20:08:05,224 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:08:05] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 20:08:26,568 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:08:26] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 20:08:26,886 - Backend_API - INFO - 收到用户消息: 它有什么意义呢？...
2025-06-28 20:08:26,888 - Backend_API - INFO - 当前对话历史包含 4 条消息
2025-06-28 20:08:26,890 - RAG_Enhanced_Chat - INFO - 对话历史长度: 235 字符
2025-06-28 20:08:26,890 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: 公共艺术是什么？ 公共艺术是一种融合了美学、社会学和文化学等多学科元素的艺术形式。它不仅关注艺术作品本身，更注重其与社会环境的互动关系。根据《社会艺术——公共艺术发展的另一种可能》中的论述，公共艺术能够激发公众对艺术的兴趣和参与度，促进社会文化的交流和发展。此外，在《高校公共艺术课程：大学生新美育的价值实现》一文中提到，公共艺术还承担着提升人们审美能力和道德素养的重要任务。综上所述，公共艺术在现代社会具有重要的地位和作用。 它有什么意义呢？  它有什么意义呢？
2025-06-28 20:08:27,037 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 20:08:44,584 - Backend_API - INFO - 生成响应完成，长度: 221
2025-06-28 20:08:44,585 - Backend_API - INFO - 当前历史记录: 4 条消息
2025-06-28 20:08:44,586 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:08:44] "POST /api/chat HTTP/1.1" 200 -
2025-06-28 20:13:02,448 - Startup - INFO - 正在启动公共艺术RAG后端服务...
2025-06-28 20:13:02,448 - Startup - INFO - 所有依赖检查通过
2025-06-28 20:13:05,755 - Backend_API - INFO - 正在初始化后端系统...
2025-06-28 20:13:05,883 - RAG_Enhanced_Chat - INFO - Ollama模型 'deepseek-r1:1.5b' 已安装
2025-06-28 20:13:05,884 - RAG_Enhanced_Chat - INFO - 正在加载嵌入模型和向量数据库...
2025-06-28 20:13:06,147 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-06-28 20:13:06,260 - RAG_Enhanced_Chat - INFO - 向量数据库加载成功，包含 5403 个文档
2025-06-28 20:13:06,261 - RAG_Enhanced_Chat - INFO - 正在加载微调模型: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B-optimized
2025-06-28 20:13:06,382 - RAG_Enhanced_Chat - INFO - 基础模型路径: C:/Users/Lenovo/Desktop/微调大模型/qwen-rag-lora/models/Qwen3-8B
2025-06-28 20:13:07,812 - accelerate.utils.modeling - INFO - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-06-28 20:13:15,123 - RAG_Enhanced_Chat - INFO - 正在加载LoRA适配器...
2025-06-28 20:13:15,704 - RAG_Enhanced_Chat - INFO - LoRA适配器加载完成
2025-06-28 20:13:15,707 - RAG_Enhanced_Chat - INFO - 模型加载完成，使用的设备: cuda:0
2025-06-28 20:13:15,707 - Backend_API - INFO - 后端系统初始化完成
2025-06-28 20:13:15,707 - Startup - INFO - 后端服务启动成功
2025-06-28 20:13:15,707 - Startup - INFO - 服务地址: http://localhost:5000
2025-06-28 20:13:15,707 - Startup - INFO - API文档:
2025-06-28 20:13:15,707 - Startup - INFO -   - POST /api/chat - 聊天接口
2025-06-28 20:13:15,707 - Startup - INFO -   - GET  /api/health - 健康检查
2025-06-28 20:13:15,707 - Startup - INFO -   - POST /api/clear-history - 清空历史
2025-06-28 20:13:15,708 - Startup - INFO -   - GET  /api/history - 获取历史
2025-06-28 20:13:16,974 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://10.203.168.35:5000
2025-06-28 20:13:16,975 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-06-28 20:13:43,399 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:13:43] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-06-28 20:13:43,664 - Backend_API - INFO - 收到用户消息: 公共艺术的分类...
2025-06-28 20:13:43,665 - Backend_API - INFO - 当前对话历史包含 2 条消息
2025-06-28 20:13:43,668 - RAG_Enhanced_Chat - INFO - 对话历史长度: 12 字符
2025-06-28 20:13:43,669 - RAG_Enhanced_Chat - INFO - 简短问题，使用扩展查询: 公共艺术的分类  公共艺术的分类
2025-06-28 20:13:45,034 - RAG_Enhanced_Chat - INFO - 检索到 1 个相关文档
2025-06-28 20:13:56,692 - Backend_API - INFO - 生成响应完成，长度: 212
2025-06-28 20:13:56,694 - Backend_API - INFO - 当前历史记录: 2 条消息
2025-06-28 20:13:56,694 - werkzeug - INFO - 127.0.0.1 - - [28/Jun/2025 20:13:56] "POST /api/chat HTTP/1.1" 200 -
